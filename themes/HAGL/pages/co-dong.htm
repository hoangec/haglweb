url = "/co-dong"
layout = "default"
title = "Cổ đông"
meta_title = "Cổ đông HAGL"
meta_description = "Cổ đông HAGL"

[section pageCoDong]
handle = "Hagl\CoDong"

[resources]
js[] = "datatables/datatables.min.js"
js[] = "datatables/moment.min.js"
js[] = "datatables/datetime-moment.js"
css[] = "datatables/datatables.min.css"
==
<?php
function onChangeDanhMuc()
{
    $id = post('id');

    $danhMucCap1 = \Hoangvo\Files\Models\DanhMuc::find($id);
    $dsDanhMucCap2 = $danhMucCap1->ds_danh_muc_con->sortByDesc('thu_tu');
    $danhMucCap2Active = $dsDanhMucCap2->first();
    $danhSachFile = $danhMucCap2Active ? $danhMucCap2Active->getAllFiles() : $danhMucCap1->getAllFiles();
    $this['danhMucCap1'] = $danhMucCap1;
    $this['dsDanhMucCap2'] = $dsDanhMucCap2;
    $this['danhMucCap2Active'] = $danhMucCap2Active;
    $this['danhSachFile'] = $danhSachFile;
}
function onChangeDanhMucCap2()
{
    $id = post('id');

    $danhMuc = \Hoangvo\Files\Models\DanhMuc::find($id);

    // return [
    //    'danhMuc' => $danhMuc
    // ];
    $this['danhSachFile'] = $danhMuc->getAllFiles();
}
?>
==
{% framework extras %}
{% set breadcrumbs = [
    {
        'name':'HAGL',
        'url':"/",
    },
    {
        'name': 'Cổ đông'
    }
] %}
{% put breadcrumbs %}
    {% partial 'app/breadcrumbs' pages=breadcrumbs %}
{% endput %}
{% partial 'app/page-title' pageBanner = pageCoDong.pageBanner type = "parallax-bg" %}
{% put pageSticks %}
    {% partial 'app/page-stick-co-dong' block =  pageCoDong.pageStickSetting%}
{% endput %}
{% for block in pageCoDong.blocks %}
    {% set blockType = block.type|split('_') %}
    {% if blockType[0] == 'dung-chung' %}
        {% partial 'blocks/dung-chung/' ~ blockType[1] block=block %}
    {% else %}
        {% partial 'blocks/co-dong/' ~ str_slug(block.type) block=block %}
    {% endif %}
{% endfor %}
